<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diagnosis Result</title>
    <link rel="stylesheet" href="/result.css">

  </head>

  <body>
    <div class="container">
      <h1>ðŸ©º Medical Report</h1>

      <% 
        const sections = [
          { title: "Symptoms", key: "**Symptoms:**", class: "symptoms" },
          { title: "Possible Diseases", key: "**Possible Diseases:**", class: "diseases" },
          { title: "Why It May Occur (Causes)", key: "**Why It May Occur (Causes):**", class: "causes" },
          { title: "Recommended Doctor Specialization", key: "**Recommended Doctor Specialization:**", class: "doctor" },
          { title: "First Aid / Immediate Care Suggestions", key: "**First Aid / Immediate Care Suggestions:**", class: "firstaid" },
          { title: "Note", key: "**Note:**", class: "note" },
        ];

        let text = result;
        const output = {};
        for (let i = 0; i < sections.length; i++) {
          const start = text.indexOf(sections[i].key);
          const end = i + 1 < sections.length ? text.indexOf(sections[i + 1].key) : text.length;
          if (start !== -1) {
            output[sections[i].title] = text.substring(start + sections[i].key.length, end).trim();
          }
        }
      %>

      <% sections.forEach(s => { %>
        <% if (output[s.title]) { %>
          <div class="section <%= s.class %>">
            <h2><%= s.title %></h2>
            <pre><%= output[s.title] %></pre>
          </div>
        <% } %>
      <% }) %>

      <div style="text-align:center; margin-top: 20px;">
        <a href="/search" class="back-btn">ðŸ”™ Go Back</a>
        <button id="Find" class="back-btn" onclick="findNearDoctorForm()">ðŸ©º Find Nearest Doctor</button>
      </div>
    </div>
  </body>
  <script>
   

    function findNearDoctorForm() {
      console.log("worked")
      window.location.href="/patientPage/findNearDoctor"
    }
  </script>
</html>